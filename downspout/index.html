<!DOCTYPE html>
<html ng-app="downspout">
  <head>
    <meta charset="utf-8">
    <title>Downspout</title>

    <!-- Styles -->
    <link rel="stylesheet" href="css/vendor/skeleton/normalize.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="css/vendor/skeleton/skeleton.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="css/main.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="css/vendor/progress-polyfill.css" media="screen" title="no title" charset="utf-8">

    <!-- Scripts -->
    <script src="bower_components/angular/angular.min.js" charset="utf-8"></script>
    <script src="js/vendor/soundcloud.js"></script>
    <script src="js/vendor/progress-polyfill.min.js"></script>
    <script src="/bower_components/angular-animate/angular-animate.js"></script>
    <script src="/bower_components/plangular/dist/plangular.min.js"></script>
    <script src="/bower_components/angular-ui-utils/unique.min.js"></script>

  </head>
  <body ng-controller="MainController">
    <h1>Downspout</h1>

    <div class="tracks">
        <div class="track"
                ng-repeat="feedItem in feed.collection | filter: {origin: {downloadable: true}} | unique:'origin.permalink_url'"
                plangular="{{feedItem.origin.permalink_url}}">
            <div class="track-body row" ng-if="track">

                <div class="track-column artwork">
                    <img class="artwork" ng-src="{{ getLargerAlbumArt(track.artwork_url || track.user.avatar_url) }}" alt="{{ track.title }}" />
                </div>
                <div class="track-column info">
                    <div class="track-info">
                        <h6>{{track.user.username}}</h6>
                        <h5>{{track.title}}</h5>
                        <a ng-href="{{track.permalink_url}}">View</a> | <a ng-href="{{track.permalink_url}}/download" download>Download</a>

                    </div>

                    <div class="track-controls">
                        <div class="play control" ng-click="play()" ng-show="player.playing !== track.src">
                            <svg class="js-geomicon geomicon" data-icon="play" viewBox="0 0 32 32" style="fill:currentcolor"><title>play icon</title><path d="M4 4 L28 16 L4 28 z"></path></svg>
                          </div>
                        <div class="pause control" ng-click="pause()" ng-show="player.playing === track.src">
                            <svg class="js-geomicon geomicon" data-icon="pause" viewBox="0 0 32 32" style="fill:currentcolor"><title>pause icon</title><path d="M4 4 H12 V28 H4 z M20 4 H28 V28 H20 z"></path></svg>
                        </div>

                        <progress
                                ng-click="play(); seek($event)"
                                ng-value="currentTime / duration">
                            {{ currentTime / duration }}
                        </progress>

                    </div>
                </div>


            </div>
        </div>
    </div>

    <h1 ng-click="more()">More?</h1>

    <!-- The app -->
    <script src="js/app.js" charset="utf-8"></script>
    <script src="js/controllers/main.js" charset="utf-8"></script>
  </body>
</html>
